
# 作为一个Java程序员，使用Rust的想法

notes:

作为一个JAVA程序员，接触了Rust一段时间后，分享一下对Rust语言的看法。

接触Rust的原因，是看到一些区块链的新公链，使用一种叫Move的开发语言，替代ETH的合约语言Solidity。而Move就是基于Rust语言开发的，这引起了我的好奇。

区块链的一大特性就是代码公开，运行环境分布在每个个体机器中。所有的安全都是由代码自身保证的，而非防火墙，或者某个隔离的运行时环境。




## 编译器

其实这一点是一些吐槽，Cargo的编译器，提供了更有效的错误信息，甚至使用指导。跟Java的错误警告对比，很像一个有经验的老者，告诉你这个语言怎么使用。

cargo build 然后根据提示编写代码，是很常见的流程。

## Cargo的价值

在Java中，我们使用Maven或者Gradle这样的项目构建管理工具。在Rust中，Cargo帮我们做了这件事，而且作用要大很多，包含了文档生成，自动优化，执行测试等其他功能。

Cargo帮我们管理了从Code到二进制执行文件转换的整个过程，而且作为非侵入式的存在，这是一种更为流行的控制平面和数据平面的隔离的设计模式。


## 引用的价值
在Rust中，你需要通过引用，通过内存地址去访问数据。从个人对比来说，这个引用要比C或者C++的引用清晰的很多，似乎第一次弄清楚了内存操作的机制。

在Java语言中，你需要理解的替代词是值传递和引用传递。如果你理解这两个次，那你会对Rust引用理解的更为容易：怎么操作堆内存的数据？

在Rust的引用上，需要理解的另一件事，是为什么Rust需要使用引用：Rust没有垃圾回收机制，所以需要对内存管理非常严格。数据都不可以随意的传递，哪怕是一个字符串。要严格限制使用者，并且必须能判断变量的生命周期，以便失效的时候立即销毁。

## 所有权是有意义的

我习惯于理解Java的对象，一个对象的属性和动作，在这个对象不用之后，会进入垃圾回收的管理范围内。

在Rust领域，需要适应的是任何一个变量，都有所有权，有生命周期，当我做了一次赋值，并不是代表一个新的引用对象，而是代表数据的所有权的转移。一个Java的开发者需要理解为什么，真正理解什么是堆和栈，Java帮我们屏蔽了这些区别。

```
let a = Option(1)
let b = a

```

特别是当使用一个结构体的值为另一个结构体复制的场合，你必须要清楚的了解这个结构体的生存时间，是否需要做深度拷贝，消耗资源在堆上开辟一个新空间。这是一个与Java完全不同的设计思想。


# 为什么Java语言环境中，讨论Rust的比较少

notes:

大量的Rust的资料中，提到的多是C，C++，还有很多Python的从业者的语言切换的案例。有很多人在选择新语言特性的时候，从GO直接过渡到Rust。

但在这个过程中，从Java开发的项目的迁移很少。也很少在Java从业者中听到该语言的讨论，似乎并没有热度。这是为什么呢？

## 使用场景不同

notes：

如果简单粗暴地分层，看不同语言的优势，会有如下的特点：
1. 嵌入式的场合：C,C++
2. 依赖系统底层的应用  C,C++
3. 基础组件 Go, Ruby
4. 命令行工具  Go，Node.js
5. 计算密集型  Scala，Python，Ruby
6. 服务化应用  Node.js，Java， Go，Python，PHP
7. 各种端的场景  Javascript, ios, android， PHP

上述不是绝对的，Python，甚至Java也有参与嵌入式的场景。

但显著的特点来说，java语言比较大的特点是做服务化的应用。这可能跟国内的互联网被几个巨头垄断的原因，Java的特点是框架体系成熟，工程学理论也很完善，非常适合解决多人协同作业。而国内偏重大而全的应用，

国外Node.js比较多，主要可能是即插即用，更符合他们的习惯和趋势，同样的，使用Rust替代的讨论也相对更多一些。

## 云的价值影响很大

notes:

随着这两年云的普及，部署容器成本显著降低，而容器平台的网络通信等也愈发成熟，大家会逐渐用轻量级的局部功能模块，替代一个一体化的工程。（也许未来技术的改变，会回到一体化的工程，就像Tesla一样）。

在这种情况下，一个轻量级的模块的快速部署和扩容，甚至是函数级别的部署，更有价值和成本优势，例如Amazon的lambda。

因此，在云的体系里面，Go，Rust，Node.js这类轻量级，或者函数式编程的语言就更为流行，在这个领域里面，讨论Rust价值的话题，明显要多很多。

# 结论
我并不想全面应用Rust，很大可能也不是一个精通Rust的专家，但我仍然有些内容想表达。

在我接触Rust的过程中，我会一直在想，哇，这个思想很特别，原来这个场景可以这么实现。这给了我很多完全不同的理念，在很多场景下，可以更有效率的选择。

在其他文章中，我可能介绍了一些Rust特性，但并不想表达Rust是更好的语言。但我很喜欢Rust。Rust给了我Java做不到的场景的工具体验。

我正在尝试使用Rust，当我有需求的时候，这是我优先的选择。



